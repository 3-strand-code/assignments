# Sexy Shopping List - Python Backend

**WORK IN PROGRESS**

For our shopping list we'll need a backend that can handle the following operations:

1. Add food category ("Dairy")
1. Add food item to some category ("Milk" to "Dairy" category)
1. Get a list of all food items and categories
1. Remove a category (and all items inside it)
1. Remove a food item

## Setup

1. Read through [these](https://flask-pymongo.readthedocs.org/en/latest/) docs to learn about Flask and PyMongo. Also, [here](http://api.mongodb.org/python/current/api/pymongo/collection.html) are some docs that will help when working with MongoDB. Take note of the `remove()` method!
1. Install [mongodb](https://www.mongodb.org/) locally and start it
1. We'll want to create a new python project, so make a directory like `shopping_list_backend`
1. `pip install Flask-PyMongo`


## Make our Flask app

Make a file `app.py`:

```python
from flask import Flask
from flask.ext.pymongo import PyMongo


app = Flask(__name__)
mongo = PyMongo(app)


# We'll put our endpoints here!


if __name__ == '__main__':
    app.run(debug=True)

```


## Add our template/form

First we'll make a test endpoint to make sure things are working, let's make a page say "Hello, world!"

```python
@app.route('/')
def index():
    return "Hello, World!"
```

Run `python app.py` and then go to `http://localhost:5000/` in your browser, it should show our message. Wee!


## API endpoints

So let's now write two endpoints: one to add categories and one to retrieve our list of items. That way we can test to see if mongodb is working the way we expect.

```python
@app.route('/category/add')
def add_category():
    # Check that we got our required data from the POST request
    if "category_name" not in request.data:
        return "Missing category name data!", 400  # Return 400 error code for bad data,
                                                   # similar to 404 error code for request for missing data!
    mongo.db.categories.insert_one(request.data["category_name"])
    return "ok"
```


